// Code generated by htemel. DO NOT EDIT.
package html

import (
	"fmt"
	"io"
	"slices"
	"strings"

	"github.com/derekmwright/htemel"
	"golang.org/x/net/html"
)

type FormElement struct {
	attributes formAttrs
	children   []htemel.Node
	skipRender bool
}

// Form creates a tag <form> instance and returns it for further modification.
// Any children passed will be nested within the tag.//
// Spec Description: The form element represents a hyperlink that can be manipulated through a collection of form-associated elements, some of which can represent editable values that can be submitted to a server for processing.
func Form(children ...htemel.Node) *FormElement {
	node := &FormElement{
		children:   children,
		attributes: make(formAttrs),
	}

	return node
}

func FormIf(condition bool, children ...htemel.Node) *FormElement {
	if condition {
		return Form(children...)
	}

	return &FormElement{
		children:   children,
		attributes: make(formAttrs),
		skipRender: true,
	}
}

func FormTernary(condition bool, true htemel.Node, false htemel.Node) *FormElement {
	if condition {
		return Form(true)
	}
	return Form(false)
}

// Children appends children to this element.
func (e *FormElement) Children(children ...htemel.Node) *FormElement {
	e.children = append(e.children, children...)
	return e
}

// With allows passing a function to modify the element via a closure.
func (e *FormElement) With(fn func(*FormElement)) *FormElement {
	fn(e)
	return e
}

// Text adds a text node to the element.
func (e *FormElement) Text(text string) *FormElement {
	return e.Children(htemel.Text(text))
}

// Textf adds a text node to the element with the given format string and arguments.
func (e *FormElement) Textf(format string, args ...any) *FormElement {
	return e.Children(htemel.Text(fmt.Sprintf(format, args...)))
}

// AddClass appends a class to the element.
func (e *FormElement) AddClass(classes ...string) *FormElement {
	current := e.attributes["class"].(string)
	all := append(strings.Fields(current), classes...)
	e.attributes["class"] = strings.Join(all, " ")
	return e
}

// ToggleClass toggles a class on or off.
func (e *FormElement) ToggleClass(class string, enable bool) *FormElement {
	classes := strings.Fields(e.attributes["class"].(string))
	idx := slices.Index(classes, class)
	if enable && idx == -1 {
		classes = append(classes, class)
	} else if !enable && idx >= 0 {
		classes = slices.Delete(classes, idx, idx+1)
	}
	e.attributes["class"] = strings.Join(classes, " ")
	return e
}

type FormAutocomplete string

const (
	FormAutocompleteOff FormAutocomplete = "off"
	FormAutocompleteOn  FormAutocomplete = "on"
)

type FormMethod string

const (
	FormMethodDialog FormMethod = "dialog"
	FormMethodGet    FormMethod = "get"
	FormMethodPost   FormMethod = "post"
)

type FormAutocapitalize string

const (
	FormAutocapitalizeCharacters FormAutocapitalize = "characters"
	FormAutocapitalizeNone       FormAutocapitalize = "none"
	FormAutocapitalizeOff        FormAutocapitalize = "off"
	FormAutocapitalizeOn         FormAutocapitalize = "on"
	FormAutocapitalizeSentences  FormAutocapitalize = "sentences"
	FormAutocapitalizeWords      FormAutocapitalize = "words"
)

type FormAutocorrect string

const (
	FormAutocorrectOn    FormAutocorrect = "on"
	FormAutocorrectOff   FormAutocorrect = "off"
	FormAutocorrectEmpty FormAutocorrect = ""
)

type FormContenteditable string

const (
	FormContenteditableFalse         FormContenteditable = "false"
	FormContenteditablePlaintextOnly FormContenteditable = "plaintext-only"
	FormContenteditableTrue          FormContenteditable = "true"
	FormContenteditableEmpty         FormContenteditable = ""
)

type FormDir string

const (
	FormDirAuto FormDir = "auto"
	FormDirLtr  FormDir = "ltr"
	FormDirRtl  FormDir = "rtl"
)

type FormDraggable string

const (
	FormDraggableTrue  FormDraggable = "true"
	FormDraggableFalse FormDraggable = "false"
)

type FormEnterkeyhint string

const (
	FormEnterkeyhintDone     FormEnterkeyhint = "done"
	FormEnterkeyhintEnter    FormEnterkeyhint = "enter"
	FormEnterkeyhintGo       FormEnterkeyhint = "go"
	FormEnterkeyhintNext     FormEnterkeyhint = "next"
	FormEnterkeyhintPrevious FormEnterkeyhint = "previous"
	FormEnterkeyhintSearch   FormEnterkeyhint = "search"
	FormEnterkeyhintSend     FormEnterkeyhint = "send"
)

type FormHidden string

const (
	FormHiddenHidden     FormHidden = "hidden"
	FormHiddenUntilFound FormHidden = "until-found"
	FormHiddenEmpty      FormHidden = ""
)

type FormInputmode string

const (
	FormInputmodeNone    FormInputmode = "none"
	FormInputmodeNumeric FormInputmode = "numeric"
	FormInputmodeSearch  FormInputmode = "search"
	FormInputmodeTel     FormInputmode = "tel"
	FormInputmodeText    FormInputmode = "text"
	FormInputmodeUrl     FormInputmode = "url"
	FormInputmodeDecimal FormInputmode = "decimal"
	FormInputmodeEmail   FormInputmode = "email"
)

type FormSpellcheck string

const (
	FormSpellcheckFalse FormSpellcheck = "false"
	FormSpellcheckTrue  FormSpellcheck = "true"
	FormSpellcheckEmpty FormSpellcheck = ""
)

type FormTranslate string

const (
	FormTranslateNo    FormTranslate = "no"
	FormTranslateYes   FormTranslate = "yes"
	FormTranslateEmpty FormTranslate = ""
)

type FormWritingsuggestions string

const (
	FormWritingsuggestionsFalse FormWritingsuggestions = "false"
	FormWritingsuggestionsTrue  FormWritingsuggestions = "true"
	FormWritingsuggestionsEmpty FormWritingsuggestions = ""
)

type formAttrs map[string]any

func (e *FormElement) AcceptCharset(s string) *FormElement {
	e.attributes["accept-charset"] = s

	return e
}

func (e *FormElement) Action(s string) *FormElement {
	e.attributes["action"] = s

	return e
}

func (e *FormElement) Autocomplete(a FormAutocomplete) *FormElement {
	e.attributes["autocomplete"] = a

	return e
}

func (e *FormElement) Enctype(s string) *FormElement {
	e.attributes["enctype"] = s

	return e
}

func (e *FormElement) Method(a FormMethod) *FormElement {
	e.attributes["method"] = a

	return e
}

func (e *FormElement) Name(s string) *FormElement {
	e.attributes["name"] = s

	return e
}

func (e *FormElement) Novalidate(b bool) *FormElement {
	e.attributes["novalidate"] = b

	return e
}

func (e *FormElement) Target(s string) *FormElement {
	e.attributes["target"] = s

	return e
}

func (e *FormElement) Rel(s ...string) *FormElement {
	e.attributes["rel"] = strings.Join(s, " ")

	return e
}

func (e *FormElement) AriaUnsafe(name string, s string) *FormElement {
	tag := strings.ToLower("aria-" + name)

	e.attributes[tag] = s

	return e
}

func (e *FormElement) Aria(name string, s string) *FormElement {
	return e.AriaUnsafe(name, html.EscapeString(s))
}

func (e *FormElement) Autocapitalize(a FormAutocapitalize) *FormElement {
	e.attributes["autocapitalize"] = a

	return e
}

func (e *FormElement) Autocorrect(a FormAutocorrect) *FormElement {
	e.attributes["autocorrect"] = a

	return e
}

func (e *FormElement) Autofocus(b bool) *FormElement {
	e.attributes["autofocus"] = b

	return e
}

func (e *FormElement) Class(s ...string) *FormElement {
	e.attributes["class"] = strings.Join(s, " ")

	return e
}

func (e *FormElement) Contenteditable(a FormContenteditable) *FormElement {
	e.attributes["contenteditable"] = a

	return e
}

func (e *FormElement) DataUnsafe(name string, s string) *FormElement {
	tag := strings.ToLower("data-" + name)

	e.attributes[tag] = s

	return e
}

func (e *FormElement) Data(name string, s string) *FormElement {
	return e.DataUnsafe(name, html.EscapeString(s))
}

func (e *FormElement) Dir(a FormDir) *FormElement {
	e.attributes["dir"] = a

	return e
}

func (e *FormElement) Draggable(a FormDraggable) *FormElement {
	e.attributes["draggable"] = a

	return e
}

func (e *FormElement) Enterkeyhint(a FormEnterkeyhint) *FormElement {
	e.attributes["enterkeyhint"] = a

	return e
}

func (e *FormElement) Hidden(a FormHidden) *FormElement {
	e.attributes["hidden"] = a

	return e
}

func (e *FormElement) Id(s string) *FormElement {
	e.attributes["id"] = s

	return e
}

func (e *FormElement) Inert(b bool) *FormElement {
	e.attributes["inert"] = b

	return e
}

func (e *FormElement) Inputmode(a FormInputmode) *FormElement {
	e.attributes["inputmode"] = a

	return e
}

func (e *FormElement) Itemid(s string) *FormElement {
	e.attributes["itemid"] = s

	return e
}

func (e *FormElement) Itemprop(s ...string) *FormElement {
	e.attributes["itemprop"] = strings.Join(s, " ")

	return e
}

func (e *FormElement) Itemref(s ...string) *FormElement {
	e.attributes["itemref"] = strings.Join(s, " ")

	return e
}

func (e *FormElement) Itemscope(b bool) *FormElement {
	e.attributes["itemscope"] = b

	return e
}

func (e *FormElement) Itemtype(s ...string) *FormElement {
	e.attributes["itemtype"] = strings.Join(s, " ")

	return e
}

func (e *FormElement) Lang(s string) *FormElement {
	e.attributes["lang"] = s

	return e
}

func (e *FormElement) Nonce(s string) *FormElement {
	e.attributes["nonce"] = s

	return e
}

func (e *FormElement) Popover(s string) *FormElement {
	e.attributes["popover"] = s

	return e
}

func (e *FormElement) Role(s string) *FormElement {
	e.attributes["role"] = s

	return e
}

func (e *FormElement) Slot(s string) *FormElement {
	e.attributes["slot"] = s

	return e
}

func (e *FormElement) Spellcheck(a FormSpellcheck) *FormElement {
	e.attributes["spellcheck"] = a

	return e
}

func (e *FormElement) Style(s string) *FormElement {
	e.attributes["style"] = s

	return e
}

func (e *FormElement) Tabindex(i int) *FormElement {
	e.attributes["tabindex"] = i

	return e
}

func (e *FormElement) Title(s string) *FormElement {
	e.attributes["title"] = s

	return e
}

func (e *FormElement) Translate(a FormTranslate) *FormElement {
	e.attributes["translate"] = a

	return e
}

func (e *FormElement) Writingsuggestions(a FormWritingsuggestions) *FormElement {
	e.attributes["writingsuggestions"] = a

	return e
}

// Render processes the current element, and writes the initial tag.
// Then all children are processed and included within the tag.
// Finally, the tag is closed.
//
// *Except for void elements as they are self closing and do not contain children.
func (e *FormElement) Render(w io.Writer) error {
	if e.skipRender {
		return nil
	}

	var sb strings.Builder
	sb.WriteString("<form")

	for key, v := range e.attributes {
		sb.WriteByte(' ')
		sb.WriteString(key)

		strVal := fmt.Sprintf("%v", v)
		if strVal != "" {
			sb.WriteByte('=')
			sb.WriteByte('"')
			sb.WriteString(strVal)
			sb.WriteByte('"')
		}
	}

	sb.WriteByte('>')
	for _, child := range e.children {
		if err := child.Render(&sb); err != nil {
			return err
		}
	}

	sb.WriteString("</form>")

	_, err := io.WriteString(w, sb.String())
	return err
}
