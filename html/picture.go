// Code generated by htemel. DO NOT EDIT.
package html

import (
	"fmt"
	"io"
	"slices"
	"strings"

	"github.com/go-htemel/htemel"
	"golang.org/x/net/html"
)

type PictureElement struct {
	attributes pictureAttrs
	children   []htemel.Node
	skipRender bool
}

// Picture creates a tag <picture> instance and returns it for further modification.
// Any children passed will be nested within the tag.//
// Spec Description: The picture element is a container which provides multiple sources to its contained img element to allow authors to declaratively control or give hints to the user agent about which image resource to use, based on the screen pixel density, viewport size, image format, and other factors. It represents its children.
func Picture(children ...htemel.Node) *PictureElement {
	node := &PictureElement{
		children:   children,
		attributes: make(pictureAttrs),
	}

	return node
}

func PictureIf(condition bool, children ...htemel.Node) *PictureElement {
	if condition {
		return Picture(children...)
	}

	return &PictureElement{
		children:   children,
		attributes: make(pictureAttrs),
		skipRender: true,
	}
}

func PictureTernary(condition bool, true htemel.Node, false htemel.Node) *PictureElement {
	if condition {
		return Picture(true)
	}
	return Picture(false)
}

// Children appends children to this element.
func (e *PictureElement) Children(children ...htemel.Node) *PictureElement {
	e.children = append(e.children, children...)
	return e
}

// With allows passing a function to modify the element via a closure.
func (e *PictureElement) With(fn func(*PictureElement)) *PictureElement {
	fn(e)
	return e
}

// Text adds a text node to the element.
func (e *PictureElement) Text(text string) *PictureElement {
	return e.Children(htemel.Text(text))
}

// Textf adds a text node to the element with the given format string and arguments.
func (e *PictureElement) Textf(format string, args ...any) *PictureElement {
	return e.Children(htemel.Text(fmt.Sprintf(format, args...)))
}

// If conditionally adds a child node to the element if the condition is true, otherwise it is a no-op.
func (e *PictureElement) If(cond bool, child htemel.Node) *PictureElement {
	if cond {
		return e.Children(child)
	}
	return e
}

func (e *PictureElement) IfElse(cond bool, then, els htemel.Node) *PictureElement {
	if cond {
		e.Children(then)
	} else {
		e.Children(els)
	}
	return e
}

// IfThen conditionally calls the given function with the element if the condition is true, otherwise it is a no-op.
func (e *PictureElement) IfThen(cond bool, fn func(*PictureElement)) *PictureElement {
	if cond {
		fn(e)
	}
	return e
}

// AddClass appends a class to the element.
func (e *PictureElement) AddClass(classes ...string) *PictureElement {
	current := e.attributes["class"].(string)
	all := append(strings.Fields(current), classes...)
	e.attributes["class"] = strings.Join(all, " ")
	return e
}

// ToggleClass toggles a class on or off.
func (e *PictureElement) ToggleClass(class string, enable bool) *PictureElement {
	classes := strings.Fields(e.attributes["class"].(string))
	idx := slices.Index(classes, class)
	if enable && idx == -1 {
		classes = append(classes, class)
	} else if !enable && idx >= 0 {
		classes = slices.Delete(classes, idx, idx+1)
	}
	e.attributes["class"] = strings.Join(classes, " ")
	return e
}

type PictureAutocapitalize string

const (
	PictureAutocapitalizeCharacters PictureAutocapitalize = "characters"
	PictureAutocapitalizeNone       PictureAutocapitalize = "none"
	PictureAutocapitalizeOff        PictureAutocapitalize = "off"
	PictureAutocapitalizeOn         PictureAutocapitalize = "on"
	PictureAutocapitalizeSentences  PictureAutocapitalize = "sentences"
	PictureAutocapitalizeWords      PictureAutocapitalize = "words"
)

type PictureAutocorrect string

const (
	PictureAutocorrectOff   PictureAutocorrect = "off"
	PictureAutocorrectOn    PictureAutocorrect = "on"
	PictureAutocorrectEmpty PictureAutocorrect = ""
)

type PictureContenteditable string

const (
	PictureContenteditableFalse         PictureContenteditable = "false"
	PictureContenteditablePlaintextOnly PictureContenteditable = "plaintext-only"
	PictureContenteditableTrue          PictureContenteditable = "true"
	PictureContenteditableEmpty         PictureContenteditable = ""
)

type PictureDir string

const (
	PictureDirAuto PictureDir = "auto"
	PictureDirLtr  PictureDir = "ltr"
	PictureDirRtl  PictureDir = "rtl"
)

type PictureDraggable string

const (
	PictureDraggableFalse PictureDraggable = "false"
	PictureDraggableTrue  PictureDraggable = "true"
)

type PictureEnterkeyhint string

const (
	PictureEnterkeyhintEnter    PictureEnterkeyhint = "enter"
	PictureEnterkeyhintGo       PictureEnterkeyhint = "go"
	PictureEnterkeyhintNext     PictureEnterkeyhint = "next"
	PictureEnterkeyhintPrevious PictureEnterkeyhint = "previous"
	PictureEnterkeyhintSearch   PictureEnterkeyhint = "search"
	PictureEnterkeyhintSend     PictureEnterkeyhint = "send"
	PictureEnterkeyhintDone     PictureEnterkeyhint = "done"
)

type PictureHidden string

const (
	PictureHiddenHidden     PictureHidden = "hidden"
	PictureHiddenUntilFound PictureHidden = "until-found"
	PictureHiddenEmpty      PictureHidden = ""
)

type PictureInputmode string

const (
	PictureInputmodeTel     PictureInputmode = "tel"
	PictureInputmodeText    PictureInputmode = "text"
	PictureInputmodeUrl     PictureInputmode = "url"
	PictureInputmodeDecimal PictureInputmode = "decimal"
	PictureInputmodeEmail   PictureInputmode = "email"
	PictureInputmodeNone    PictureInputmode = "none"
	PictureInputmodeNumeric PictureInputmode = "numeric"
	PictureInputmodeSearch  PictureInputmode = "search"
)

type PictureSpellcheck string

const (
	PictureSpellcheckFalse PictureSpellcheck = "false"
	PictureSpellcheckTrue  PictureSpellcheck = "true"
	PictureSpellcheckEmpty PictureSpellcheck = ""
)

type PictureTranslate string

const (
	PictureTranslateNo    PictureTranslate = "no"
	PictureTranslateYes   PictureTranslate = "yes"
	PictureTranslateEmpty PictureTranslate = ""
)

type PictureWritingsuggestions string

const (
	PictureWritingsuggestionsFalse PictureWritingsuggestions = "false"
	PictureWritingsuggestionsTrue  PictureWritingsuggestions = "true"
	PictureWritingsuggestionsEmpty PictureWritingsuggestions = ""
)

type pictureAttrs map[string]any

func (e *PictureElement) AriaUnsafe(name string, s string) *PictureElement {
	tag := strings.ToLower("aria-" + name)

	e.attributes[tag] = s

	return e
}

func (e *PictureElement) Aria(name string, s string) *PictureElement {
	return e.AriaUnsafe(name, html.EscapeString(s))
}

func (e *PictureElement) Autocapitalize(a PictureAutocapitalize) *PictureElement {
	e.attributes["autocapitalize"] = a

	return e
}

func (e *PictureElement) Autocorrect(a PictureAutocorrect) *PictureElement {
	e.attributes["autocorrect"] = a

	return e
}

func (e *PictureElement) Autofocus(b bool) *PictureElement {
	e.attributes["autofocus"] = b

	return e
}

func (e *PictureElement) Class(s ...string) *PictureElement {
	e.attributes["class"] = strings.Join(s, " ")

	return e
}

func (e *PictureElement) Contenteditable(a PictureContenteditable) *PictureElement {
	e.attributes["contenteditable"] = a

	return e
}

func (e *PictureElement) DataUnsafe(name string, s string) *PictureElement {
	tag := strings.ToLower("data-" + name)

	e.attributes[tag] = s

	return e
}

func (e *PictureElement) Data(name string, s string) *PictureElement {
	return e.DataUnsafe(name, html.EscapeString(s))
}

func (e *PictureElement) Dir(a PictureDir) *PictureElement {
	e.attributes["dir"] = a

	return e
}

func (e *PictureElement) Draggable(a PictureDraggable) *PictureElement {
	e.attributes["draggable"] = a

	return e
}

func (e *PictureElement) Enterkeyhint(a PictureEnterkeyhint) *PictureElement {
	e.attributes["enterkeyhint"] = a

	return e
}

func (e *PictureElement) Hidden(a PictureHidden) *PictureElement {
	e.attributes["hidden"] = a

	return e
}

func (e *PictureElement) Id(s string) *PictureElement {
	e.attributes["id"] = s

	return e
}

func (e *PictureElement) Inert(b bool) *PictureElement {
	e.attributes["inert"] = b

	return e
}

func (e *PictureElement) Inputmode(a PictureInputmode) *PictureElement {
	e.attributes["inputmode"] = a

	return e
}

func (e *PictureElement) Itemid(s string) *PictureElement {
	e.attributes["itemid"] = s

	return e
}

func (e *PictureElement) Itemprop(s ...string) *PictureElement {
	e.attributes["itemprop"] = strings.Join(s, " ")

	return e
}

func (e *PictureElement) Itemref(s ...string) *PictureElement {
	e.attributes["itemref"] = strings.Join(s, " ")

	return e
}

func (e *PictureElement) Itemscope(b bool) *PictureElement {
	e.attributes["itemscope"] = b

	return e
}

func (e *PictureElement) Itemtype(s ...string) *PictureElement {
	e.attributes["itemtype"] = strings.Join(s, " ")

	return e
}

func (e *PictureElement) Lang(s string) *PictureElement {
	e.attributes["lang"] = s

	return e
}

func (e *PictureElement) Nonce(s string) *PictureElement {
	e.attributes["nonce"] = s

	return e
}

func (e *PictureElement) Popover(s string) *PictureElement {
	e.attributes["popover"] = s

	return e
}

func (e *PictureElement) Role(s string) *PictureElement {
	e.attributes["role"] = s

	return e
}

func (e *PictureElement) Slot(s string) *PictureElement {
	e.attributes["slot"] = s

	return e
}

func (e *PictureElement) Spellcheck(a PictureSpellcheck) *PictureElement {
	e.attributes["spellcheck"] = a

	return e
}

func (e *PictureElement) Style(s string) *PictureElement {
	e.attributes["style"] = s

	return e
}

func (e *PictureElement) Tabindex(i int) *PictureElement {
	e.attributes["tabindex"] = i

	return e
}

func (e *PictureElement) Title(s string) *PictureElement {
	e.attributes["title"] = s

	return e
}

func (e *PictureElement) Translate(a PictureTranslate) *PictureElement {
	e.attributes["translate"] = a

	return e
}

func (e *PictureElement) Writingsuggestions(a PictureWritingsuggestions) *PictureElement {
	e.attributes["writingsuggestions"] = a

	return e
}

// Render processes the current element, and writes the initial tag.
// Then all children are processed and included within the tag.
// Finally, the tag is closed.
//
// *Except for void elements as they are self closing and do not contain children.
func (e *PictureElement) Render(w io.Writer) error {
	if e.skipRender {
		return nil
	}

	var sb strings.Builder
	sb.WriteString("<picture")

	for key, v := range e.attributes {
		sb.WriteByte(' ')
		sb.WriteString(key)

		strVal := fmt.Sprintf("%v", v)
		if strVal != "" {
			sb.WriteByte('=')
			sb.WriteByte('"')
			sb.WriteString(strVal)
			sb.WriteByte('"')
		}
	}

	sb.WriteByte('>')
	for _, child := range e.children {
		if err := child.Render(&sb); err != nil {
			return err
		}
	}

	sb.WriteString("</picture>")

	_, err := io.WriteString(w, sb.String())
	return err
}
